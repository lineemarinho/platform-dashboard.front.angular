<app-breadcrumb
  [items]="breadcrumbItems"
  [backRoute]="'/payouts'"
></app-breadcrumb>

<!-- Loading -->
@if (isLoading) {
<div class="p-4 lg:p-6">
  <div class="flex items-center justify-center">
    <div
      class="animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"
    ></div>
  </div>
  <p class="text-center mt-4 text-gray-600">Carregando detalhes do payout...</p>
</div>
}

<!-- Error -->
@if (error && !isLoading) {
<app-error-message
  [error]="error"
  [title]="'Erro ao carregar dados'"
  [showRetry]="false"
  (retry)="onBack()"
></app-error-message>
}

<!-- Content -->
@if (payment && !isLoading) {
<div class="p-4 lg:p-6">
  <div class="mb-6">
    <h1 class="text-xl font-bold text-gray-900">
      {{ "orderDetails" | locale }}
    </h1>
  </div>

  <div class="space-y-6">
    <div class="bg-white">
      <h2 class="text-sm font-semibold text-gray-900 mb-4">
        {{ "holderData" | locale }}
      </h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        @for (field of holderFields; track field.label) { @if (field.label ===
        'divider') {
        <div class="col-span-3 border-b border-gray-200 my-4"></div>
        } @if (field.label === '') {
        <div></div>
        } @if (field.label !== 'divider' && field.label !== '') {
        <app-info-field [label]="field.label | locale" [value]="field.value">
          @if (field.copy) {
          <button
            (click)="onCopyToClipboard(field.value, field.label)"
            class="ml-2 text-gray-400 hover:text-gray-600 transition-colors"
            title="Copiar"
            type="button"
          >
            <span class="material-icons text-sm">content_copy</span>
          </button>
          }
        </app-info-field>
        } }
      </div>
    </div>

    <div class="bg-white">
      <h2 class="text-sm font-semibold text-gray-900 mb-4">
        {{ "payer" | locale }}
      </h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        @for (field of payerFields; track field.label) {
        <app-info-field
          [label]="field.label | locale"
          [value]="field.value"
        ></app-info-field>
        }
      </div>
    </div>

    <div class="bg-white">
      <h2 class="text-sm font-semibold text-gray-900 mb-4">
        {{ "recipient" | locale }}
      </h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        @for (field of recipientFields; track field.label) { @if (field.label
        === 'divider') {
        <div class="col-span-3 border-b border-gray-200 my-4"></div>
        } @if (field.label === '') {
        <div></div>
        } @if (field.label !== 'divider' && field.label !== '') {
        <app-info-field
          [label]="field.label | locale"
          [value]="field.value"
        ></app-info-field>
        } }
      </div>
    </div>

    <div class="bg-white">
      <h2 class="text-sm font-semibold text-gray-900 mb-4">
        {{ "fees" | locale }}
      </h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        @for (field of feesFields; track field.label) { @if (field.label ===
        'divider') {
        <div class="col-span-3 border-b border-gray-200 my-4"></div>
        } @if (field.label !== 'divider') {
        <app-info-field
          [label]="field.label | locale"
          [value]="field.value"
        ></app-info-field>
        } }
      </div>
    </div>

    <div class="bg-white">
      <h2 class="text-sm font-semibold text-gray-900 mb-4">
        {{ "providerRouter" | locale }}
      </h2>
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        @for (field of providerRouterFields; track field.label) {
        <app-info-field [label]="field.label | locale" [value]="field.value">
          @if (field.copy) {
          <button
            (click)="onCopyToClipboard(field.value, field.label)"
            class="ml-2 text-gray-400 hover:text-gray-600 transition-colors"
            title="Copiar"
            type="button"
          >
            <span class="material-icons text-sm">content_copy</span>
          </button>
          }
        </app-info-field>
        }
      </div>
    </div>

    <div class="bg-white">
      <h2 class="text-sm font-semibold text-gray-900 mb-4">
        {{ "orderTransactions" | locale }}
      </h2>
      <app-table
        [columns]="transactionColumns"
        [rows]="transactionRows"
        [columnMap]="mapTransactionToColumns"
        [showActions]="false"
      ></app-table>
    </div>
  </div>
</div>
}
